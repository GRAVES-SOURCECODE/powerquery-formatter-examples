(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{203:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(204),l=(n(44),n(16),n(210),n(50),n(230)),s=n.n(l),i=(n(211),n(231),n(232)),c=n(205);n(247);var u=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this).onToggle=function(){n.setState({toggled:!n.state.toggled})},n.state={toggled:null!=n.props.toggled&&n.props.toggled},n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.prototype.render=function(){return r.a.createElement("div",{className:"toggle-content-container"},r.a.createElement("a",{onClick:this.onToggle},0==this.state.toggled?r.a.createElement(c.b,null):r.a.createElement(c.c,null),this.props.head),1==this.props.toggleDisplayOnly?r.a.createElement("div",{className:"toggle-content-children "+(0==this.state.toggled?"no-display":"")},this.props.children):1==this.state.toggled?r.a.createElement("div",{className:"toggle-content-children"},this.props.children):"")},a}(r.a.Component);var m=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.prototype.render=function(){var e=this.props.error;return r.a.createElement("div",{className:"error-container"},r.a.createElement("div",null,"PARSER_ERROR"==e.kind?r.a.createElement("span",{className:"error"},"Could not parse your M code. We use the ",r.a.createElement("a",{href:"https://github.com/microsoft/powerquery-parser"},"official microsoft powerquery-parser")," so chances are that the issue is within your code."):"","CSS_ERROR"==e.kind?r.a.createElement("span",{className:"error"},"Could not parse your inline CSS. We use ",r.a.createElement("a",{href:"https://github.com/csstree/validator"},"csstree-validator")," for validation so chances are that the issue is within your css."):"","INVALID_CONFIG"==e.kind?r.a.createElement("span",{className:"error"},"Invalid configuration specified. Please check if your configuration matches the schema specified below."):"","INVALID_REQUEST_BODY"==e.kind?r.a.createElement("span",{className:"error"},"Invalid request body. This should not happen. Consider writing a bug report if the issue persists."):""),r.a.createElement("div",null,r.a.createElement(u,{head:r.a.createElement("span",{title:"Information about the actual error that got thrown"},"Inner Error")},r.a.createElement("code",null,JSON.stringify(e.innerError,null,3)))),r.a.createElement("div",null,r.a.createElement(u,{head:r.a.createElement("span",{title:"Meta information about the error"},"Meta Info")},r.a.createElement("code",null,JSON.stringify(e.meta,null,3)))))},a}(r.a.Component),d=(n(19),n(69),JSON.parse(JSON.stringify({indentation:"&nbsp;&nbsp;",indentationLength:2,lineEnd:"<br/>",ws:"&nbsp;",lineWidth:100,numBrackets:3,escapeHtmlText:!0,alignPairedExpressionsByEqual:!1,inlineCss:"\n.constant.keyword {\ncolor: #c586c0;\n}\n\n.constant {\ncolor: #d4d4d4;\n}\n\n.identifier {\ncolor: #9cdcfe;\n}\n\n.operator {\ncolor: #d4d4d4;\n}\n\n.bracket {\nfont-weight: bold;\n}\n\n.bracket-0 {\ncolor: Gold;\n}\n\n.bracket-1 {\ncolor: GoldenRod;\n}\n\n.bracket-2 {\ncolor: DarkGoldenRod;\n}\n\n.type {\ncolor: #4ec9b0;\n}\n\n.literal.null {\ncolor: #569cd6;\n}\n\n.literal.string {\ncolor: #ce9178;\n}\n\n.literal {\ncolor: #dcdcaa;\n}\n\nbody {\nfont-family: monospace;\nbackground-color: #1e1e1e;\n}\n"})));var p=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this).handleChange=function(e){var t={};"checkbox"==e.target.type?t[e.target.name]=e.target.checked:t[e.target.name]=e.target.value,n.setState(t)},n.state={indentLength:d.indentationLength.toString(),lineWidth:d.lineWidth.toString(),inlineCss:d.inlineCss.toString(),alignExpressionsByEqual:d.alignPairedExpressionsByEqual,numBrackets:d.numBrackets.toString(),indentLengthErr:null,numBracketsErr:null,inlineCssErr:null,lineWidthErr:null,inlineCssToggle:!0},n.props.initializer(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.getConfig=function(){function e(e){return null!=e&&0==isNaN(e)}this.setState({lineWidthErr:null,numBracketsErr:null,indentLengthErr:null,inlineCssErr:null});var t={},n=+this.state.indentLength;0==e(n)?(!1,t.indentLengthErr="Could not parse integer."):n<0&&(!1,t.indentLengthErr="Invalid value, must be >= 0");var a=+this.state.lineWidth;0==e(a)?(!1,t.lineWidthErr="Could not parse integer."):a<0&&(!1,t.lineWidthErr="Invalid value, must be >= 0");var r=+this.state.numBrackets;return 0==e(r)?(!1,t.numBracketsErr="Could not parse integer."):r<0&&(!1,t.numBracketsErr="Invalid value, must be >= 0"),Object.assign({},d,{indentationLength:n,lineWidth:a,numBrackets:r,inlineCss:1==this.state.inlineCssToggle?this.state.inlineCss:null,alignPairedExpressionsByEqual:this.state.alignExpressionsByEqual,indentation:d.ws.repeat(n)})},o.render=function(){return r.a.createElement("div",{className:"options-container"},r.a.createElement("div",{className:"option"},r.a.createElement("label",null,r.a.createElement("span",{title:"Number of whitespace characters used to indent"},"Indentation"),null!=this.state.indentLengthErr?r.a.createElement("span",{className:"error"},this.state.indentLengthErr):"",r.a.createElement("input",{className:"input",name:"indentLength",onChange:this.handleChange,value:this.state.indentLength,type:"text",placeholder:"number of whitespace to indent"}))),r.a.createElement("div",{className:"option"},r.a.createElement("label",null,r.a.createElement("span",{title:"Number of characters allowed in one line. The formatter will try to break statements to fit into the line width. Some statements cannot be broken in a good way (like a very long string literal) and therefore the line width can be exceeded in some cases."},"Line width"),null!=this.state.lineWidthErr?r.a.createElement("span",{className:"error"},this.state.lineWidthErr):"",r.a.createElement("input",{className:"input",name:"lineWidth",onChange:this.handleChange,value:this.state.lineWidth,type:"text",placeholder:"line width"}))),r.a.createElement("div",{className:"option"},r.a.createElement("label",null,r.a.createElement("span",{title:"Number of different bracket classes. Brackets are given classes bracket-{number} for you to style matching brackets specifically."},"Number of brackets"),null!=this.state.numBracketsErr?r.a.createElement("span",{className:"error"},this.state.numBracketsErr):"",r.a.createElement("input",{className:"input",name:"numBrackets",onChange:this.handleChange,value:this.state.numBrackets,type:"text",placeholder:"Number of bracket classes"}))),r.a.createElement("div",{className:"option"},r.a.createElement("label",null,r.a.createElement("input",{className:"checkbox",name:"alignExpressionsByEqual",onChange:this.handleChange,checked:this.state.alignExpressionsByEqual,type:"checkbox"}),r.a.createElement("span",{title:"Number of characters allowed in one line. The formatter will try to break statements to fit into the line width. Some statements cannot be broken in a good way (like a very long string literal) and therefore the line width can be exceeded in some cases."}," Align paired expressions by equal"))),r.a.createElement("div",{className:"option"},r.a.createElement("label",null,r.a.createElement("input",{className:"checkbox",name:"inlineCssToggle",onChange:this.handleChange,checked:this.state.inlineCssToggle,type:"checkbox"}),r.a.createElement("span",{title:"Css that is applied as inline style tags to the formatted html elements. If disabled only the css classes will be applied and no style tags. You can use your custom css here to apply custom styles. Please refer to the documentation about what classes are available to you."},"InlineCss"),r.a.createElement("textarea",{cols:100,rows:25,name:"inlineCss",onChange:this.handleChange,className:"textarea "+(0==this.state.inlineCssToggle?"no-display":""),value:this.state.inlineCss,placeholder:"inline css"}))))},a}(r.a.Component);function h(e,t,n,a,r,o,l){try{var s=e[o](l),i=s.value}catch(c){return void n(c)}s.done?t(i):Promise.resolve(i).then(a,r)}function f(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function l(e){h(o,a,r,l,s,"next",e)}function s(e){h(o,a,r,l,s,"throw",e)}l(void 0)})}}var g=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this).codeRef=r.a.createRef(),n.format=f(s.a.mark(function e(){var t,a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n.state.code&&""!=n.state.code){e.next=3;break}return n.setState({formatErr:"Please enter some code to format"}),e.abrupt("return");case 3:if(n.setState({formatting:!0,formatErr:null,error:null}),e.prev=4,null==(t=n.optionComponent.getConfig())){e.next=25;break}return e.next=9,fetch("https://m-formatter.azurewebsites.net/api/format",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:n.state.code,config:t})});case 9:if(!(a=e.sent).ok){e.next=19;break}return e.t0=n,e.next=14,a.text();case 14:e.t1=e.sent,e.t2={result:e.t1},e.t0.setState.call(e.t0,e.t2),e.next=23;break;case 19:return e.next=21,a.json();case 21:r=e.sent,n.setState({error:r});case 23:e.next=26;break;case 25:n.setState({toggleOptions:!0});case 26:return e.prev=26,n.setState({formatting:!1}),e.finish(26);case 29:case"end":return e.stop()}},e,null,[[4,,26,29]])})),n.toggleOptions=function(){n.setState({toggleOptions:!n.state.toggleOptions})},n.handleChange=function(e){var t={};"checkbox"==e.target.type?t[e.target.name]=e.target.checked:t[e.target.name]=e.target.value,n.setState(t)},n.back=function(){n.setState({result:null})},n.state={code:null,result:null,error:null,errorMessage:null,toggleOptions:!1,formatting:!1,formatErr:null},n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.componentDidMount=function(){var e=this;this.codeRef.current.addEventListener("keydown",function(t){if(9==t.which){var n=e.codeRef.current.selectionStart,a=e.codeRef.current.value;a=a.substring(0,n)+" ".repeat(2)+a.substring(n),e.codeRef.current.value=a,e.codeRef.current.selectionStart=n+2,e.codeRef.current.selectionEnd=n+2,t.preventDefault()}})},o.propagateState=function(){},o.render=function(){var e=this;return r.a.createElement("div",{className:"formatter-container"},r.a.createElement("div",{className:"formatter-input "+(null!=this.state.result?"no-display":"")},r.a.createElement("textarea",{ref:this.codeRef,className:"textarea",cols:100,rows:10,name:"code",onChange:this.handleChange}),null!=this.state.error?r.a.createElement(m,{error:this.state.error}):""),r.a.createElement("div",{className:"formatter-errors"},null!=this.state.formatErr?r.a.createElement("span",{className:"error"},this.state.formatErr):""),null!=this.state.result?r.a.createElement("div",{className:"formatter-result}"},r.a.createElement(i.a,{formatted:this.state.result,backCallback:this.back})):"",r.a.createElement("div",{className:"formatter-input-controls"},r.a.createElement("div",null,r.a.createElement("button",{onClick:this.toggleOptions,className:"button action-button "+(1==this.state.toggleOptions?"is-active":"")},"Options")),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.format,className:"button action-button "+(1==this.state.formatting?"is-loading":""),disabled:1==this.state.formatting},"Format"))),r.a.createElement("div",{className:0==this.state.toggleOptions?"no-display":""},r.a.createElement(p,{initializer:function(t){return e.optionComponent=t}})))},a}(r.a.Component);n.d(t,"HomePage",function(){return E});var E=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.prototype.render=function(){return r.a.createElement(o.a,{header:{url:"/",type:"website",title:"M Formatter | Beautify your PowerQuery code",description:"Format your M (PowerQuery) code with M Formatter"}},r.a.createElement("div",null,r.a.createElement("h1",null,"Beautify your M / PowerQuery Code with M Formatter")),r.a.createElement("div",null,r.a.createElement(g,null)))},a}(r.a.Component);t.default=E},232:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});n(41),n(69),n(16);var a=n(0),r=n.n(a),o=(n(244),n(245)),l=n.n(o);function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var i="undefined"!=typeof window?new DOMParser:null,c=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.prototype.render=function(){return r.a.createElement("div",{className:this.props.className,dangerouslySetInnerHTML:{__html:this.props.content}})},t}(r.a.Component),u=function(t){function n(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).code="",e.on_copy_clicked=function(){l()(e.code,{format:"text/plain"})},e.on_copyhtml_clicked=function(){l()(e.formatted,{format:"text/html"}),l()(e.formatted,{format:"text/plain"})},e}return s(n,t),n.prototype.render=function(){var t=this;this.formatted=this.props.formatted;var n=null!=this.props.footerhtml?e.from(this.props.footerhtml,"base64").toString("utf8"):null,a=[];return"undefined"!=typeof window&&(a=this.formatted.split(/<\s*br\s*\/?\s*>/g).filter(function(e){var n=i.parseFromString('<span id="mark">'+e+"</span>","text/html").getElementById("mark");return null!=n&&null!=n.textContent&&(t.code+=n.textContent+"\n"),null!=n.firstChild&&""!=n.firstChild.textContent})),r.a.createElement("div",{className:"code-block-container"},r.a.createElement("div",{className:"code-block-table-container"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"line-numbers"},a.map(function(e,t){return r.a.createElement("div",{className:"line-numbers code-line "+(t%2==0?"code-line-1":"code-line-2"),key:t},t+1)})),r.a.createElement("td",null,r.a.createElement("div",null,a.map(function(e,t){return r.a.createElement(c,{key:t,className:"code-line "+(t%2==0?"code-line-1":"code-line-2"),content:e})}))))))),r.a.createElement("div",{className:"code-block-footer"},null!=n?r.a.createElement(c,{content:n}):"",r.a.createElement("span",null,r.a.createElement("button",{className:"button action-button",onClick:this.on_copy_clicked},"Copy Code")),r.a.createElement("span",null,r.a.createElement("button",{className:"button action-button",onClick:this.on_copyhtml_clicked},"Copy HTML")),r.a.createElement("span",null,r.a.createElement("button",{className:"button action-button",onClick:this.props.backCallback},"Back"))))},n}(r.a.Component)}).call(this,n(233).Buffer)}}]);
//# sourceMappingURL=component---src-pagecomponents-home-tsx-0a591aad2a4adf2f02da.js.map